<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Nagios on Chris Titus Tech | Tech Content Creator</title>
    <link>https://christitus.com/tags/nagios/</link>
    <description>Recent content in Nagios on Chris Titus Tech | Tech Content Creator</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Sat, 24 Jun 2017 04:14:45 +0000</lastBuildDate><atom:link href="https://christitus.com/tags/nagios/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Report Nvidia-smi Temperature to Nagios</title>
      <link>https://christitus.com/nvidia-smi-nagios/</link>
      <pubDate>Sat, 24 Jun 2017 04:14:45 +0000</pubDate>
      
      <guid>https://christitus.com/nvidia-smi-nagios/</guid>
      <description>&lt;p&gt;Here is a custom script that reports the nvidia-smi temperature of the Nvidia cards in your system using NRPE. Conversely,  NRPE performs much better than NCPA and my protocol of choice.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;*Note: Install NRPE to your&lt;/em&gt; Linux &lt;em&gt;box first, and create this file (gpu_temp.sh) in your /&lt;em&gt;usr&lt;/em&gt;/lib/&lt;em&gt;nagios&lt;/em&gt;/plugins directory for Nagios Core 4+&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;nagios-nrpe-query-command&#34;&gt;Nagios NRPE Query Command&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;check_nrpe!gpu_temp.sh&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This will only query the first GPU that is found via nvidia-smi CLI command. It will do warnings and alerts at the given thresholds.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://christitus.com/images/2017/06/script.png&#34; alt=&#34;nvidia smi nagios&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;the-gpu_tempsh-script&#34;&gt;The gpu_temp.sh Script&lt;/h3&gt;
&lt;p&gt;Use this script to query nvidia-smi, thus reporting the temp of the card.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;############################################
## Sample nvidia commands to query gpu
##
##nvidia-smi -q -d TEMPERATURE | grep &amp;quot;GPU Current Temp&amp;quot; | awk &#39;{print $5}&#39;
##nvidia-smi --query-gpu=temperature.gpu --format=csv,noheader
##nvidia-smi | grep &#39;[0-9][0-9]C&#39; | awk &#39;{print $3}&#39; | sed &#39;s/C//&#39;
############################################`
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Here is the script code:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#!/bin/bash
gpu_temp=`nvidia-smi | grep &#39;[0-9][0-9]C&#39; | awk &#39;{print $3}&#39;`
case $gpu_temp in
[1-70]*)
echo &amp;quot;OK - $gpu_temp in normal operating range.&amp;quot;
exit 0
;;
[71-80]*)
echo &amp;quot;WARNING - $gpu_temp in high operating range.&amp;quot;
exit 1
;;
[81-100]*)
echo &amp;quot;CRITICAL - $gpu_temp in extreme operating range. Shutdown ASAP!&amp;quot;
exit 2
;;
*)
echo &amp;quot;UNKNOWN - $gpu_temp is current temperature.&amp;quot;
exit 3
;;
esac`
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You will need to modify this as the nvidia-smi tool will be updated in the future and the grep command will have to be reconfigured if due to any output changes.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Troubleshooting Nagios 4 Core Installation</title>
      <link>https://christitus.com/troubleshooting-nagios/</link>
      <pubDate>Wed, 21 Jun 2017 17:13:44 +0000</pubDate>
      
      <guid>https://christitus.com/troubleshooting-nagios/</guid>
      <description>&lt;p&gt;Use the following command to verify you have all your config and command files correct when troubleshooting Nagios core installation. This will give you a readout of any configuration errors, thus giving you the ability to fix it on the fly.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;I’d recommend making an alias in your .bashrc so you can just type:&lt;code&gt;testnag&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Here is an example of the alias I use&lt;/p&gt;
&lt;p&gt;&lt;code&gt;alias testnag=&#39;/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg&#39;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;By using these tips it will cut down on your install and configuration times considerably. You can also make changes and test them before restarting the service, therefore avoiding any potential downtime in your monitoring.&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>
